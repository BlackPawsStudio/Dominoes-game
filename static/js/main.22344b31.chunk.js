(this["webpackJsonpdominoes-react"]=this["webpackJsonpdominoes-react"]||[]).push([[0],{23:function(e,a,t){},25:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),i=t(5),r=t(2),c=t(7),l=t(11),u=function(e){var a=e.map((function(e){return e[0]+e[1]}));return Math.max.apply(Math,Object(l.a)(a))},d=function(e){var a,t,n=(a=e.length,t=0,Math.trunc(Math.random()*(a-t)+t)),s=e[n];return e.splice(n,1),s},o=function(e,a){e.dice.push(d(a))},p=function(e,a,t){for(var n=0;n<t;n++)e.forEach((function(e){return o(e,a)}))},m=function(e,a){return a.find((function(a){return a[0]===e[0]||a[0]===e[1]||a[1]===e[0]||a[1]===e[1]}))},j=function(e){return[e[0][0],e[e.length-1][1]]},b=Object(c.b)({name:"domino",initialState:{pile:[],playersAmount:2,players:[{id:0,dice:[]}],table:[],message:"",playerQueue:[],playerTurn:{id:0},isGameOver:!0,isGamePaused:!1,skipCount:0,moveSpeed:1500},reducers:{initFill:function(e){e.pile=function(){for(var e=[],a=0;a<=6;a++)for(var t=0;t<=a;t++){var n=[a,t];e.push(n)}return e}(),e.table=[],e.table.push(d(e.pile)),e.players=function(e,a){for(var t=[],n=0;n<e;n++)t.push({id:n,dice:[]});return p(t,a,e<4?7:5),t}(e.playersAmount,e.pile),e.players.sort((function(e,a){return u(e.dice)<u(a.dice)?1:-1})),e.playerQueue=e.players.map((function(e){return e.id})),e.message="Everything is up and ready"},changePlayers:function(e,a){var t=a.payload;e.playersAmount=t},startGame:function(e){e.isGameOver=!e.isGameOver,e.playerTurn={id:e.playerQueue[0]}},playerMove:function(e,a){var t=a.payload,n=function(){var a=e.playerQueue.indexOf(e.playerTurn.id)+1;e.playerTurn={id:e.playerQueue[a]},void 0===e.playerTurn.id&&(e.playerTurn={id:e.playerQueue[0]})},s=e.players[e.playerQueue.indexOf(e.playerTurn.id)],i=m(j(e.table),t.dice);if(i){var r=t.dice.indexOf(i),c=t.dice.concat();c.splice(r,1),s.dice=c,e.table=function(e,a){for(var t=e,n=j(e),s=[a,[a[1],a[0]]],i=0;i<s.length;i++){if(s[i][0]===n[1]){t.push(s[i]);break}if(s[i][1]===n[0]){t.unshift(s[i]);break}}return t}(e.table,i),e.message="Player ".concat(t.id," played ").concat(JSON.stringify(i)),e.skipCount=0,0===s.dice.length&&(e.isGamePaused=!0,alert("Player ".concat(t.id," wins!"))),n()}else if(0===e.pile.length)e.message="Pile now is empty, player ".concat(t.id,"'s skipping"),e.skipCount++,e.skipCount===e.players.length&&(e.isGamePaused=!0,alert("No legal moves! Draw!")),n();else{var l=t.dice.concat();l.unshift(d(e.pile)),s.dice=l,e.message="Player ".concat(t.id," picked ").concat(JSON.stringify(t.dice[0])),i=m(j(e.table),t.dice),e.playerTurn={id:s.id}}},changeSpeed:function(e,a){var t=a.payload;e.moveSpeed=5e3-t},pauseGame:function(e){e.isGamePaused=!e.isGamePaused}}}),f=b.reducer,y=b.actions,v=y.initFill,O=y.changePlayers,h=y.startGame,x=y.playerMove,g=y.changeSpeed,_=y.pauseGame,N=Object(r.b)({dominoSlice:f}),G=Object(c.a)({reducer:N}),P=t(4),S=(t(23),t(12)),T=t(0),k=function(e){var a=Object(S.a)(e.data,2),t=a[0],n=a[1];return Object(T.jsxs)("div",{className:"dice",children:[Object(T.jsx)("div",{className:"dice__dots",children:new Array(t).fill(Object(T.jsx)("span",{className:"dice__dots__dot"}))}),Object(T.jsx)("span",{className:"dice__separator"}),Object(T.jsx)("div",{className:"dice__dots",children:new Array(n).fill(Object(T.jsx)("span",{className:"dice__dots__dot"}))})]})},C=function(e){var a=e.diceData;return Object(T.jsxs)("div",{className:"table",children:[Object(T.jsx)("h3",{className:"table__text",children:"Table:"}),Object(T.jsx)("div",{className:"table__dice",children:a.map((function(e,a){return Object(T.jsx)(k,{data:[e[0],e[1]]},a)}))})]})},A=function(e){var a=e.diceData;return Object(T.jsxs)("div",{className:"pile",children:[Object(T.jsx)("h3",{className:"pile__text",children:"Pile:"}),Object(T.jsx)("div",{className:"pile__dice",children:a.map((function(e,a){return Object(T.jsx)(k,{data:[e[0],e[1]]},a)}))})]})},D=function(){return Object(P.b)()},w=P.c,F=function(e){var a=e.id,t=e.diceData,s=w((function(e){var a=e.dominoSlice;return{playerTurn:a.playerTurn,isGameOver:a.isGameOver,speed:a.moveSpeed,isPaused:a.isGamePaused}})),i=s.playerTurn,r=s.isGameOver,c=s.speed,l=s.isPaused,u=D();return Object(n.useEffect)((function(){r||l||i.id===a&&setTimeout((function(){u(x({id:a,dice:t}))}),c)}),[i,l]),Object(T.jsxs)("div",{className:"player",children:[Object(T.jsxs)("p",{className:"player__number",children:["Player: ",a]}),Object(T.jsx)("span",{className:"player__separator"}),Object(T.jsx)("div",{className:"player__dice",children:t.map((function(e,a){return Object(T.jsx)(k,{data:[e[0],e[1]]},a)}))})]})},M=function(e){var a=e.text;return Object(T.jsx)("h3",{className:"game-text",children:a})},Q=function(e){var a=e.playersAmount,t=e.isGameOver,n=w((function(e){var a=e.dominoSlice;return{speed:a.moveSpeed,isPaused:a.isGamePaused}})),s=n.speed,i=n.isPaused,r=D();return Object(T.jsxs)("div",{className:"settings",children:[Object(T.jsxs)("p",{children:["Amount of players: ",a]}),Object(T.jsx)("input",{disabled:!t,onChange:function(e){r(O(e.target.value))},type:"range",className:"settings__input",min:"2",max:"5",defaultValue:a}),Object(T.jsxs)("p",{children:["Time for move: ",s/1e3," sec"]}),Object(T.jsx)("input",{className:"settings__input",type:"range",min:"0",max:"5000",defaultValue:1500,onChange:function(e){var a=e.target;r(g(a.value))}}),Object(T.jsxs)("div",{className:"settings__buttons",children:[Object(T.jsx)("button",{className:"settings__buttons__button",disabled:t,onClick:function(){r(_())},children:i?"Resume game":"Pause game"}),Object(T.jsx)("button",{className:"settings__buttons__button",onClick:function(){r(h())},children:t?"Start game":"Reset game"})]})]})};var E=function(){var e=w((function(e){var a=e.dominoSlice;return{pile:a.pile,playersAmount:a.playersAmount,players:a.players,table:a.table,message:a.message,isGameOver:a.isGameOver}})),a=e.pile,t=e.playersAmount,s=e.players,i=e.table,r=e.message,c=e.isGameOver,l=D();return Object(n.useEffect)((function(){c&&l(v())}),[c,t]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(C,{diceData:i}),Object(T.jsx)(Q,{playersAmount:t,isGameOver:c}),Object(T.jsx)(A,{diceData:a}),Object(T.jsx)(M,{text:r}),Object(T.jsx)("div",{className:"players",children:s.map((function(e,a){return Object(T.jsx)(F,{id:e.id,diceData:e.dice},a)}))})]})},J=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,26)).then((function(a){var t=a.getCLS,n=a.getFID,s=a.getFCP,i=a.getLCP,r=a.getTTFB;t(e),n(e),s(e),i(e),r(e)}))};Object(i.render)(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(P.a,{store:G,children:Object(T.jsx)(E,{})})}),document.getElementsByClassName("root")[0]),J()}},[[25,1,2]]]);
//# sourceMappingURL=main.22344b31.chunk.js.map