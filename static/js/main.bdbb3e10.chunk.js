(this["webpackJsonpdominoes-react"]=this["webpackJsonpdominoes-react"]||[]).push([[0],{23:function(e,a,t){},25:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),i=t(6),r=t(2),c=t(8),l=t(12),u=function(e){var a=e.map((function(e){return e[0]+e[1]}));return Math.max.apply(Math,Object(l.a)(a))},d=function(e){var a,t,n=(a=e.length,t=0,Math.trunc(Math.random()*(a-t)+t)),s=e[n];return e.splice(n,1),s},o=function(e,a){e.dice.push(d(a))},p=function(e,a,t){for(var n=0;n<t;n++)e.forEach((function(e){return o(e,a)}))},m=function(e,a){return a.find((function(a){return a[0]===e[0]||a[0]===e[1]||a[1]===e[0]||a[1]===e[1]}))},j=function(e){return[e[0][0],e[e.length-1][1]]},b=Object(c.b)({name:"domino",initialState:{pile:[],playersAmount:2,players:[{id:0,dice:[]}],table:[],message:"",playerQueue:[],playerTurn:{id:0},isGameOver:!0,isGamePaused:!1,skipCount:0,moveSpeed:1500},reducers:{initFill:function(e){e.pile=function(){for(var e=[],a=0;a<=6;a++)for(var t=0;t<=a;t++){var n=[a,t];e.push(n)}return e}(),e.table=[],e.table.push(d(e.pile)),e.players=[],e.players=function(e,a){for(var t=[],n=0;n<e;n++)t.push({id:n,dice:[]});return p(t,a,e<4?7:5),t}(e.playersAmount,e.pile),e.players.sort((function(e,a){return u(e.dice)<u(a.dice)?1:-1})),e.playerQueue=e.players.map((function(e){return e.id})),e.message="Everything is up and ready"},changePlayers:function(e,a){var t=a.payload;e.playersAmount=t},startGame:function(e){e.isGamePaused=!1,e.isGameOver=!e.isGameOver,e.playerTurn={id:e.playerQueue[0]}},resetGame:function(e){e.isGamePaused=!0,e.isGameOver=!0,e.playerTurn={id:e.playerQueue[0]}},playerMove:function(e,a){var t=a.payload,n=function(){var a=e.playerQueue.indexOf(e.playerTurn.id)+1;e.playerTurn={id:e.playerQueue[a]},void 0===e.playerTurn.id&&(e.playerTurn={id:e.playerQueue[0]})},s=e.players[e.playerQueue.indexOf(e.playerTurn.id)],i=m(j(e.table),t.dice);if(i){var r=t.dice.indexOf(i),c=t.dice.concat();c.splice(r,1),s.dice=c,e.table=function(e,a){for(var t=e,n=j(e),s=[a,[a[1],a[0]]],i=0;i<s.length;i++){if(s[i][0]===n[1]){t.push(s[i]);break}if(s[i][1]===n[0]){t.unshift(s[i]);break}}return t}(e.table,i),e.message="Player ".concat(t.id," played ").concat(JSON.stringify(i)),e.skipCount=0,0===s.dice.length&&(e.isGamePaused=!0,alert("Player ".concat(t.id," wins!"))),n()}else if(0===e.pile.length)e.message="Pile now is empty, player ".concat(t.id,"'s skipping"),e.skipCount++,e.skipCount===e.players.length&&(e.isGamePaused=!0,alert("No legal moves! Draw!")),n();else{var l=t.dice.concat();l.unshift(d(e.pile)),s.dice=l,e.message="Player ".concat(t.id," picked ").concat(JSON.stringify(t.dice[0])),i=m(j(e.table),t.dice),e.playerTurn={id:s.id}}},changeSpeed:function(e,a){var t=a.payload;e.moveSpeed=5e3-t},pauseGame:function(e){e.isGamePaused=!e.isGamePaused}}}),f=b.reducer,y=b.actions,O=y.initFill,v=y.changePlayers,h=y.startGame,x=y.resetGame,g=y.playerMove,_=y.changeSpeed,N=y.pauseGame,G=Object(r.b)({dominoSlice:f}),P=Object(c.a)({reducer:G}),S=t(5),T=(t(23),t(3)),k=t(0),C=function(e){var a=Object(T.a)(e.data,2),t=a[0],n=a[1];return Object(k.jsxs)("div",{className:"dice",children:[Object(k.jsx)("div",{className:"dice__dots",children:new Array(t).fill("").map((function(e,a){return Object(k.jsx)("span",{className:"dice__dots__dot"},a)}))}),Object(k.jsx)("span",{className:"dice__separator"}),Object(k.jsx)("div",{className:"dice__dots",children:new Array(n).fill("").map((function(e,a){return Object(k.jsx)("span",{className:"dice__dots__dot"},a)}))})]})},A=function(e){var a=e.diceData;return Object(k.jsxs)("div",{className:"table",children:[Object(k.jsx)("h3",{className:"table__text",children:"Table:"}),Object(k.jsx)("div",{className:"table__dice",children:a.map((function(e,a){return Object(k.jsx)(C,{data:[e[0],e[1]]},a)}))})]})},D=function(e){var a=e.diceData,t=Object(n.useState)(!0),s=Object(T.a)(t,2),i=s[0],r=s[1];return Object(k.jsxs)("div",{className:"pile",children:[Object(k.jsx)("h3",{className:"pile__text",onClick:function(){r(!i)},children:"Pile:"}),Object(k.jsx)("div",{className:i?"":"pile__dice__hidden",children:a.map((function(e,a){return Object(k.jsx)(C,{data:[e[0],e[1]]},a)}))})]})},Q=function(){return Object(S.b)()},w=S.c,F=function(e){var a=e.id,t=e.diceData,s=w((function(e){var a=e.dominoSlice;return{playerTurn:a.playerTurn,isGameOver:a.isGameOver,speed:a.moveSpeed,isPaused:a.isGamePaused}})),i=s.playerTurn,r=s.isGameOver,c=s.speed,l=s.isPaused,u=Q();return Object(n.useEffect)((function(){r||l||i.id===a&&setTimeout((function(){u(g({id:a,dice:t}))}),c)}),[i,l]),Object(k.jsxs)("div",{className:"player",children:[Object(k.jsxs)("p",{className:"player__number",children:["Player: ",a]}),Object(k.jsx)("span",{className:"player__separator"}),Object(k.jsx)("div",{className:"player__dice",children:t.map((function(e,a){return Object(k.jsx)(C,{data:[e[0],e[1]]},a)}))})]})},M=function(e){var a=e.text;return Object(k.jsx)("h3",{className:"game-text",children:a})},E=function(e){var a=e.playersAmount,t=e.isGameOver,s=w((function(e){var a=e.dominoSlice;return{speed:a.moveSpeed,isPaused:a.isGamePaused,delay:a.moveSpeed}})),i=s.speed,r=s.isPaused,c=s.delay,l=Object(n.useState)(!0),u=Object(T.a)(l,2),d=u[0],o=u[1],p=Q();return Object(k.jsxs)("div",{className:"settings",children:[Object(k.jsx)("p",{className:"settings__title",onClick:function(){o(!d)},children:"Settings"}),Object(k.jsxs)("div",{className:d?"":"settings_hidden",children:[Object(k.jsxs)("p",{children:["Amount of players: ",a]}),Object(k.jsx)("input",{disabled:!t,onChange:function(e){p(v(e.target.value))},type:"range",className:"settings__input",min:"2",max:"5",defaultValue:a}),Object(k.jsxs)("p",{children:["Time for move: ",i/1e3," sec"]}),Object(k.jsx)("input",{className:"settings__input",type:"range",min:"0",max:"5000",defaultValue:i,onChange:function(e){var a=e.target;p(_(a.value))}}),Object(k.jsxs)("div",{className:"settings__buttons",children:[Object(k.jsx)("button",{className:"settings__buttons__button",disabled:t,onClick:function(){p(N())},children:r?"Resume game":"Pause game"}),Object(k.jsx)("button",{className:"settings__buttons__button",onClick:function(){t?p(h()):(p(N()),setTimeout((function(){p(x())}),c))},children:t?"Start game":"Reset game"})]})]})]})};var J=function(){var e=w((function(e){var a=e.dominoSlice;return{pile:a.pile,playersAmount:a.playersAmount,players:a.players,table:a.table,message:a.message,isGameOver:a.isGameOver}})),a=e.pile,t=e.playersAmount,s=e.players,i=e.table,r=e.message,c=e.isGameOver,l=Q();return Object(n.useEffect)((function(){c&&l(O())}),[c,t]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(A,{diceData:i}),Object(k.jsx)(E,{playersAmount:t,isGameOver:c}),Object(k.jsx)(D,{diceData:a}),Object(k.jsx)(M,{text:r}),Object(k.jsx)("div",{className:"players",children:s.map((function(e,a){return Object(k.jsx)(F,{id:e.id,diceData:e.dice},a)}))})]})},B=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,26)).then((function(a){var t=a.getCLS,n=a.getFID,s=a.getFCP,i=a.getLCP,r=a.getTTFB;t(e),n(e),s(e),i(e),r(e)}))};Object(i.render)(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(S.a,{store:P,children:Object(k.jsx)(J,{})})}),document.getElementsByClassName("root")[0]),B()}},[[25,1,2]]]);
//# sourceMappingURL=main.bdbb3e10.chunk.js.map